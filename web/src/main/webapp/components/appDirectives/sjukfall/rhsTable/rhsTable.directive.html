<div class="rhs-table" st-set-filter="rhsSearchfilter" st-set-sort="rhsSort" st-table="displayedCollection" st-safe-src="model.get()" infinite-scroll="showMoreInTable()" infinite-scroll-distance="2">

  <rhs-export></rhs-export>
  <rhs-table-search-connector></rhs-table-search-connector>
  <rhs-reset-limit on-change="resetLimit()" scroll-element=".rhs-table" padding-top="57"></rhs-reset-limit>

  <rhs-table-number-of-rows total-rows="model.get().length"></rhs-table-number-of-rows>

    <table class="table table-striped" rhs-table-fixed-header="rhs-table-header-fixed-top" fixed-header="rhs-table-fixed-header" normal-header="rhs-table-normal-header"  padding-top="46">
      <thead class="hidden" rhs-table-header id="rhs-table-fixed-header" user="user" glapp="filter.get().glapp"></thead>
      <thead rhs-table-header id="rhs-table-normal-header" user="user" glapp="filter.get().glapp"></thead>
      <tbody id="rhs-table-body">
        <tr ng-repeat="row in displayedCollection | limitTo: limit track by row.patient.id" class="rhs-table-row" ng-click="showPatientHistory(row.patient)">
          <td class="column-number">{{$index + 1}}</td>
          <td class="column-patient-id">{{::row.patient.id}}</td>
          <td class="column-patient-alder">{{::row.patient.alder}}</td>
          <td class="column-patient-name">{{::row.patient.namn}}</td>
          <td class="column-patient-kon">{{::row.patient.konShow}}</td>
          <td class="column-diagnos">
            <span uib-tooltip-html="getToolTip(row.diagnos)" tooltip-popup-delay="200" class="rhs-table-tooltip">{{::row.diagnos.intygsVarde}}</span>
            <span class="column-diagnos-beskrivning" ng-bind-html="row.diagnos.beskrivning"></span>
          </td>
          <td class="column-bidiagnoser">
            <span ng-repeat="d in row.biDiagnoser track by $index">
              <span ng-if="$index > 0"> ,</span>
              <span uib-tooltip-html="getToolTip(d)" tooltip-popup-delay="200" class="rhs-table-tooltip">{{::d.intygsVarde}}</span>
            </span>
            <span ng-if="row.biDiagnoser.length < 1">-</span>
          </td>
          <td class="column-start start-date">{{::row.start}}</td>
          <td class="column-slut end-date">{{::row.slut}}</td>
          <td class="column-dagar">{{::row.dagarShow}}</td>
          <td class="column-antal">{{::row.intyg}}</td>
          <td  class="column-grad" ng-bind-html="::row.gradShow"></td>
          <td ng-if="user.urval != 'ISSUED_BY_ME'">{{::row.lakare.namn}}</td>
        </tr>
        <tr ng-if="!displayedCollection.length">
          <td colspan="{{noResultColspan}}" class="rhs-table-no-result">
            <span ng-if="!model.get().length && !model.hasError()">
              {{::'label.table.no-result' | message}} {{user.valdVardgivare.namn}} - {{user.valdVardenhet.namn}}
            </span>
            <span ng-if="model.get().length">
              {{::'label.table.no-filter-result' | message}}
            </span>
            <span ng-if="model.hasError()">
              {{::'server.error.getsjukfall.title' | message}}
            </span>
          </td>
        </tr>
      </tbody>
    </table>
</div>