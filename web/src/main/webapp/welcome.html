<!DOCTYPE html>
<html lang="sv" id="ng-app" ng-app="rhsWelcomeApp">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="ROBOTS" content="nofollow, noindex"/>

<title>Rehabstöd testinloggning</title>
<!-- build:css({build/.tmp,src/main/webapp}) app/app.css -->
<!-- injector:css -->
<link rel="stylesheet" href="app/app.css">
<!-- endinjector -->
<!-- endbuild -->

<script type="text/javascript" src="bower_components/angular/angular.min.js"></script>

<style type="text/css">
  textarea {
    font-family: Consolas, Lucida Console, monospace;
    font-size: 0.7em;
  }
</style>

<script type="text/javascript">
  //Lägg till fler templates i arrayen + i options för att utöka antalet inloggingar

  var loginArr = [
    // NMT testperson, finns i test-HSA
    {
      "fornamn": "Leonie",
      "efternamn": "Koehl",
      "hsaId": "TSTNMT2321000156-103F",
      "enhetId": "TSTNMT2321000156-1039",
      "lakare": true,
      "forskrivarKod": "9300005"
    },
    // NMT test-läkare
    {
      "fornamn": "Erik",
      "efternamn": "Nilsson",
      "hsaId": "TSTNMT2321000156-105H",
      "enhetId": "TSTNMT2321000156-105F",
      "lakare" : true,
      "forskrivarKod": "9300005",
      "befattningsKod": "204090"
    },

    {
      "fornamn": "Susanne",
      "efternamn": "Karlsson",
      "hsaId": "TSTNMT2321000156-105J",
      "enhetId": "TSTNMT2321000156-105F",
      "lakare" : false,
      "forskrivarKod": "9300005",
      "systemRoles": ["INTYG;Rehab-TSTNMT2321000156-105F"]
    },

    {
      "fornamn": "Pelle",
      "efternamn": "Uppdragslös",
      "hsaId": "pelle-uppdragslos",
      "enhetId": "TSTNMT2321000156-105F",
      "lakare" : false,
      "forskrivarKod": "9300005"
    },

    {
      "fornamn": "Hans",
      "efternamn": "Hosplösa",
      "hsaId": "hans-hosplosa",
      "enhetId": "TSTNMT2321000156-105F",
      "lakare" : false,
      "forskrivarKod": "9300005"
    },

    // Användare för Rehabstöd som ska finnas i:
    // - Test HSA
    // - Rehabstöd
    // - Webcert
    // - Intygstjänsten

    // Läkare 1
    {
      "fornamn": "Emma",
      "efternamn": "Nilsson",
      "hsaId": "TSTNMT2321000156-105R",
      "enhetId": "TSTNMT2321000156-105N",
      "lakare" : true
    },

    // Läkare 2
    {
      "fornamn": "Anders",
      "efternamn": "Karlsson",
      "hsaId": "TSTNMT2321000156-105S",
      "enhetId": "TSTNMT2321000156-105N",
      "lakare" : true
    },

    // Läkare 3
    {
      "fornamn": "Ingrid",
      "efternamn": "Nilsson Olsson",
      "hsaId": "TSTNMT2321000156-105T",
      "enhetId": "TSTNMT2321000156-105P",
      "lakare" : true
    },

    // Vårdadmin 1
    {
      "fornamn": "Nils",
      "efternamn": "Ericsson",
      "hsaId": "TSTNMT2321000156-105V",
      "enhetId": "TSTNMT2321000156-105N",
      "lakare" : false,
      "systemRoles": ["INTYG;Rehab-TSTNMT2321000156-105N"]
    },

    // Vårdadmin 2
    {
      "fornamn": "Kerstin",
      "efternamn": "Johansson",
      "hsaId": "TSTNMT2321000156-105W",
      "enhetId": "TSTNMT2321000156-105P",
      "lakare" : false,
      "systemRoles": ["INTYG;Rehab-TSTNMT2321000156-105P", "INTYG;Rehab-TSTNMT2321000156-105Q"]
    } ,
    // C-bio
    {
      "fornamn": "Elin",
      "efternamn": "Johansson",
      "hsaId": "TSTNMT2321000156-1067",
      "enhetId": "TSTNMT2321000156-1062",
      "lakare" : true
    },{
      "fornamn": "Lars",
      "efternamn": "Olsson",
      "hsaId": "TSTNMT2321000156-1066",
      "enhetId": "TSTNMT2321000156-1062",
      "lakare" : false,
      "systemRoles": ["INTYG;Rehab-TSTNMT2321000156-1062", "INTYG;Rehab-TSTNMT2321000156-1063"]
    },
    {
      "fornamn": "Rolf",
      "efternamn": "Rollöse",
      "hsaId": "TSTNMT2321000156-999V",
      "enhetId": "TSTNMT2321000156-105N",
      "lakare" : false,
      "systemRoles": []
    },
    {
      "fornamn": "Ralf",
      "efternamn": "Enhetlöse",
      "hsaId": "TSTNMT2321000156-998V",
      "enhetId": "TSTNMT2321000156-105N",
      "lakare" : false,
      "systemRoles": ["INTYG;Rehab-some-other-careunit"]
    }
  ];

  function updateJsonInput() {
    var jsonEl = document.getElementById("userJson");
    var jsonElView = document.getElementById("userJsonDisplay");
    var selector = document.getElementById("jsonSelect");
    //jsonEl.value = escape(JSON.stringify(loginArr[selector.selectedIndex], undefined, 2));
    jsonElView.value = JSON.stringify(loginArr[selector.selectedIndex], undefined, 1);
    jsonEl.value = escape(JSON.stringify(loginArr[selector.selectedIndex], undefined, 1));
  };

  angular.module('rhsWelcomeApp', [
    'rhsWelcomeApp.controllers'
  ]);

  angular.module('rhsWelcomeApp.controllers', []).
  controller('welcomeController', function($scope) {
    $scope.loginModel = loginArr;
    $scope.selectedIndex = '0';
    $scope.$watch('selectedIndex', function(newSelected, oldVal) {
      var jsonEl = angular.element( document.querySelector( '#userJson' ) );
      var jsonElView = angular.element( document.querySelector( '#userJsonDisplay' ) );
      var selector = angular.element( document.querySelector( '#jsonSelect' ) );
      //jsonEl.value = escape(JSON.stringify(loginArr[selector.selectedIndex], undefined, 2));
      //console.log("newselected : " + newSelected + ", old : " + oldVal);
      var loginJson = JSON.stringify($scope.loginModel[newSelected], undefined, 1);
      jsonElView.text( loginJson );
      jsonEl.text( escape( loginJson ) );
    });

  });
</script>
</head>
<body ng-controller="welcomeController">
  <form id="loginForm" action="/fake" method="POST" class="form-inline" accept-charset="UTF-8">
    <div class="container">

      <div id="content-container">
        <div class="content row">

          <h1 class="page-header">Testinloggningar Rehabstöd</h1>

          <p class="well">Templatelista till vänster - Manuella ändringar kan göras i jsonstrukturen - detta
            omvandlas till inloggad userContext</p>

          <div class="form-group col-xs-8">

            <h4>Mallar</h4>
            <select id="jsonSelect" name="jsonSelect" ng-model="selectedIndex" size="15" style="width: 100%;max-width:100%" class="form-control">
              <option value="0" id="TSTNMT2321000156-103F_TSTNMT2321000156-1039">Leonie Koehl (Läkare EU/ESS/Schweiz)</option>
              <option value="1" id="TSTNMT2321000156-105H_TSTNMT2321000156-105F">Erik Nilsson (NMT Läkare / Vård och Behandling)</option>
              <option value="2" id="TSTNMT2321000156-105J_TSTNMT2321000156-105F">Susanne Karlsson (NMT Administratör / Vård och Behandling)</option>
              <option value="3" id="pelle-uppdragslos_">Pelle Uppdragslös (Saknar medarbetaruppdrag)</option>
              <option value="4" id="hans-hosplosa_">Hans Hosplösa (Finns ej i HSA-stubben)</option>
              <option value="5" id="TSTNMT2321000156-105R_TSTNMT2321000156-105N">Emma Nilsson (Rehabstöd/Läkare 1/Vård och Behandling)</option>
              <option value="6" id="TSTNMT2321000156-105S_TSTNMT2321000156-105N">Anders Karlsson (Rehabstöd/Läkare 2/Vård och Behandling)</option>
              <option value="7" id="TSTNMT2321000156-105T_TSTNMT2321000156-105P">Ingrid Nilsson Olsson (Rehabstöd/Läkare 3/Vård och Behandling)</option>
              <option value="8" id="TSTNMT2321000156-105V_TSTNMT2321000156-105N">Nils Ericsson (Rehabstöd/Vårdadmin 1/Vård och Behandling)</option>
              <option value="9" id="TSTNMT2321000156-105W_TSTNMT2321000156-105P">Kerstin Johansson (Rehabstöd/Vårdadmin 2/Vård och Behandling)</option>
              <option value="10" id="TSTNMT2321000156-1067_TSTNMT2321000156-1062">Elin Johansson (Cambio/Läkare/Vård och Behandling)</option>
              <option value="11" id="TSTNMT2321000156-1066_TSTNMT2321000156-1062">Lars Olsson (Cambio/Vårdadmin/Vård och Behandling)</option>
              <option value="12" id="TSTNMT2321000156-999V_TSTNMT2321000156-105N">Rolf Rollöse (saknar hsa systemroll Rehab för enheter)</option>
              <option value="13" id="TSTNMT2321000156-998V_TSTNMT2321000156-105N">Ralf Enhetlöse (saknar rätt enhet på systemroll)</option>


            </select>
            <input id="loginBtn" type="submit" value="Logga in" class="btn btn-primary"
                   style="margin-top: 20px;width: 100%">

          </div>

          <div class="form-group col-xs-4">
            <p>
            <h4>Inloggningsprofil</h4>
            <input type="hidden" id="userJson" name="userjson"/>
            <textarea id="userJsonDisplay" name="userJsonDisplay" class="field form-control"
                      style="height: 200px;width: 100%;">
            </textarea>
          </div>


        </div>
      </div>
    </div>


  </form>

</body>
</html>
