<!DOCTYPE html>
<html lang="sv" id="ng-app" ng-app="rhsWelcomeApp">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="ROBOTS" content="nofollow, noindex"/>

<title>Rehabstöd testinloggning</title>
<!-- build:css({build/.tmp,src/main/webapp}) app/app.css -->
<!-- injector:css -->
<link rel="stylesheet" href="app/app.css">
<!-- endinjector -->
<!-- endbuild -->

<script type="text/javascript" src="bower_components/angular/angular.min.js"></script>

<style type="text/css">
  textarea {
    font-family: Consolas, Lucida Console, monospace;
    font-size: 0.7em;
  }
</style>

<script type="text/javascript">
  //Lägg till fler templates i arrayen + i options för att utöka antalet inloggingar

  var loginArr = [
    {
      "fornamn": "Jan",
      "efternamn": "Nilsson",
      "hsaId": "IFV1239877878-1049",
      "enhetId": "IFV1239877878-1042",
      "lakare": true,
      "forskrivarKod": "2481632"
    },

    // Vårdadmin 1
    {
      "fornamn": "Lena",
      "efternamn": "Karlsson",
      "hsaId": "IFV1239877878-104N",
      "enhetId": "IFV1239877878-1045",
      "lakare": false
    },

    // NMT testperson, finns i test-HSA
    {
      "fornamn": "Leonie",
      "efternamn": "Koehl",
      "hsaId": "TSTNMT2321000156-103F",
      "enhetId": "TSTNMT2321000156-1039",
      "lakare": true,
      "forskrivarKod": "9300005"
    },
    // NMT test-läkare
    {
      "fornamn": "Erik",
      "efternamn": "Nilsson",
      "hsaId": "TSTNMT2321000156-105H",
      "enhetId": "TSTNMT2321000156-105F",
      "lakare" : true,
      "forskrivarKod": "9300005",
      "befattningsKod": "204090"
    },

    {
      "fornamn": "Susanne",
      "efternamn": "Karlsson",
      "hsaId": "TSTNMT2321000156-105J",
      "enhetId": "TSTNMT2321000156-105F",
      "lakare" : false,
      "forskrivarKod": "9300005"
    },

    {
      "fornamn": "Pelle",
      "efternamn": "Uppdragslös",
      "hsaId": "pelle-uppdragslos",
      "enhetId": "TSTNMT2321000156-105F",
      "lakare" : false,
      "forskrivarKod": "9300005"
    },

    {
      "fornamn": "Hans",
      "efternamn": "Hosplösa",
      "hsaId": "hans-hosplosa",
      "enhetId": "TSTNMT2321000156-105F",
      "lakare" : false,
      "forskrivarKod": "9300005"
    }
  ];

  function updateJsonInput() {
    var jsonEl = document.getElementById("userJson");
    var jsonElView = document.getElementById("userJsonDisplay");
    var selector = document.getElementById("jsonSelect");
    //jsonEl.value = escape(JSON.stringify(loginArr[selector.selectedIndex], undefined, 2));
    jsonElView.value = JSON.stringify(loginArr[selector.selectedIndex], undefined, 1);
    jsonEl.value = escape(JSON.stringify(loginArr[selector.selectedIndex], undefined, 1));
  };

  angular.module('rhsWelcomeApp', [
    'rhsWelcomeApp.controllers'
  ]);

  angular.module('rhsWelcomeApp.controllers', []).
  controller('welcomeController', function($scope) {
    $scope.loginModel = loginArr;
    $scope.selectedIndex = '0';
    $scope.$watch('selectedIndex', function(newSelected, oldVal) {
      var jsonEl = angular.element( document.querySelector( '#userJson' ) );
      var jsonElView = angular.element( document.querySelector( '#userJsonDisplay' ) );
      var selector = angular.element( document.querySelector( '#jsonSelect' ) );
      //jsonEl.value = escape(JSON.stringify(loginArr[selector.selectedIndex], undefined, 2));
      //console.log("newselected : " + newSelected + ", old : " + oldVal);
      var loginJson = JSON.stringify($scope.loginModel[newSelected], undefined, 1);
      jsonElView.text( loginJson );
      jsonEl.text( escape( loginJson ) );
    });

  });
</script>
</head>
<body ng-controller="welcomeController">
  <form id="loginForm" action="/fake" method="POST" class="form-inline" accept-charset="UTF-8">
    <div class="container">

      <div id="content-container">
        <div class="content row">

          <h1 class="page-header">Testinloggningar Rehabstöd</h1>

          <p class="well">Templatelista till vänster - Manuella ändringar kan göras i jsonstrukturen - detta
            omvandlas till inloggad userContext</p>

          <div class="form-group col-xs-8">

            <h4>Mallar</h4>
            <select id="jsonSelect" name="jsonSelect" ng-model="selectedIndex" size="15" style="width: 100%;max-width:100%" class="form-control">
              <option value="0" id="IFV1239877878-1049_IFV1239877878-1042">Jan Nilsson (Läkare / Vård och Behandling + Admin)</option>
              <option value="1" id="IFV1239877878-104N_IFV1239877878-1045">Lena Karlsson (Vårdadmin / Vård och Behandling)</option>
              <option value="2" id="TSTNMT2321000156-103F_TSTNMT2321000156-1039">Leonie Koehl (Läkare EU/ESS/Schweiz)</option>
              <option value="3" id="TSTNMT2321000156-105H_TSTNMT2321000156-105F">Erik Nilsson (NMT Läkare / Vård och Behandling)</option>
              <option value="4" id="TSTNMT2321000156-105J_TSTNMT2321000156-105F">Susanne Karlsson (NMT Administratör / Vård och Behandling)</option>
              <option value="5" id="pelle-uppdragslos_">Pelle Uppdragslös (Saknar medarbetaruppdrag)</option>
              <option value="6" id="hans-hosplosa_">Hans Hosplösa (Finns ej i HSA-stubben)</option>
            </select>
            <input id="loginBtn" type="submit" value="Logga in" class="btn btn-primary"
                   style="margin-top: 20px;width: 100%">

          </div>

          <div class="form-group col-xs-4">
            <p>
            <h4>Inloggningsprofil</h4>
            <input type="hidden" id="userJson" name="userjson"/>
            <textarea id="userJsonDisplay" name="userJsonDisplay" class="field form-control"
                      style="height: 200px;width: 100%;">
            </textarea>
          </div>


        </div>
      </div>
    </div>


  </form>

</body>
</html>
