# ====================================================================================================
#   Konfiguration för Webcerts rollhantering
#
#   YAML specifikation: http://www.yaml.org/spec/1.2/spec.html
#
#   Kort förklaring till vissa konstruktioner i filen:
#
#   '-'   används för att skapa listor av värden
#   '&'   används för att skapa ett ankare (unik nyckel)
#   '*'   används för att peka på ett ankare, kallas också alias
#   '<<:' används för att slå ihop och skriva över värden
#
#   '&' och '*' används för att undvika duplikat i en YAML-fil
#
#   Överskådligt exempel:
#
#  defaults: &defaults
#     adapter:  postgres
#     host:     localhost
#
#   development:
#     database: myapp_development
#     <<: *defaults
#
#   test:
#     database: myapp_test
#     <<: *defaults
#
#   & sets up the name of the anchor (“defaults”),
#   << means “merge the given hash into the current one”, and
#   * includes the named anchor (“defaults” again).
#
# ====================================================================================================
---
version: 1.0
released: 2015-12-18
changedby: Magnus Ekstrand


# ====================================================================================================
#   Kända basvärden
# ====================================================================================================

# De ingångar till systemet som finns
knownRequestOrigins:
  - &kro010 NORMAL

# De intygstyper som systemet har
knownIntygstyper:
  - &ki010 fk7263

# De rättigheter som systemet har
knownPrivileges:
  - &kp000 VISA_INTYG
  - &kp070 FILTRERA_PA_LAKARE
  - &kp080 ATKOMST_ANDRA_ENHETER
  - &kp090 HANTERA_PERSONUPPGIFTER
  - &kp110 NAVIGERING

# De roller som systemet har
knownRoles:
  - &kr010 LAKARE
  - &kr050 REHABKOORDINATOR


# ====================================================================================================
#   Definitioner av ingångar, roller, privilegier, yrkesroller och befattnings-/gruppförskrivarkoder
# ====================================================================================================

# Ingångar
requestOrigins:
  - &ro010
    name: *kro010
    intygstyper: # Implicit alla

# Rättigheter
privileges:
  - &p000
    name: *kp000
    desc: Visa intyg
    intygstyper:
    requestOrigins: # Implicit alla
  - &p070
    name: *kp070
    desc: Filtrera på annan läkare
    intygstyper: # Implicit alla
    requestOrigins: # Implicit alla
      - *ro010 # NORMAL
  - &p080
    name: *kp080
    desc: Åtkomst andra vårdenheter
    intygstyper: # Implicit alla
    requestOrigins:
      - *ro010 # NORMAL
  - &p090
    name: *kp090
    desc: Hantera personuppgifter
    intygstyper: # Implicit alla
    requestOrigins:
      - *ro010 # NORMAL
  - &p110
    name: *kp110
    desc: Navigera i menyer, på logo, via tillbakaknappar
    intygstyper: # Implicit alla
    requestOrigins:
      - *ro010 # NORMAL

# Roller
roles:
  - &r010
    name: *kr010 # LAKARE
    desc: Läkare
    privileges:
      - *p000 # VISA_INTYG
      - *p080 # ATKOMST_ANDRA_ENHETER
      - *p090 # HANTERA_PERSONUPPGIFTER
      - *p110 # NAVIGERING
  - &r050
    name: *kr050 # REHABKOORDINATOR
    desc: Rehabkoordinator
    privileges:
      - *p000 # VISA_INTYG
      - *p080 # ATKOMST_ANDRA_ENHETER
      - *p090 # HANTERA_PERSONUPPGIFTER
      - *p110 # NAVIGERING

# Legitimerade yrkesroller
titles:
  - title: Läkare
    role: *r010 # LAKARE
  - title: Rehabkoordinator
    role: *r050 # REHABKOORDINATOR

# Kombination befattningskoder och gruppförskrivarkoder
titleCodes:
  - titleCode: 204010
    groupPrescriptionCode:
    role: *r010 # LAKARE
  - titleCode: 203090
    groupPrescriptionCode: 9300005
    role: *r010 # LAKARE
  - titleCode: 203090
    groupPrescriptionCode: 9400003
    role: *r010 # LAKARE
  - titleCode: 204090
    groupPrescriptionCode: 9100009
    role: *r010 # LAKARE

